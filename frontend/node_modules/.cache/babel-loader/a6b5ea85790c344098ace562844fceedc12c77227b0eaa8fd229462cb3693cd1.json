{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shaky\\\\OneDrive\\\\Documents\\\\roadvision\\\\frontend\\\\src\\\\pages\\\\MonitoringCenter.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { fetchStreams, fetchResults } from \"../api/api\";\nimport \"./monitoring.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MonitoringCenter() {\n  _s();\n  const [streams, setStreams] = useState([]);\n  const [results, setResults] = useState({});\n  const [logs, setLogs] = useState([]);\n\n  // Load active streams\n  useEffect(() => {\n    loadStreams();\n    const i = setInterval(loadStreams, 4000);\n    return () => clearInterval(i);\n  }, []);\n  const loadStreams = async () => {\n    const data = await fetchStreams();\n    setStreams(data);\n  };\n\n  // Poll results periodically\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      for (const s of streams) {\n        const res = await fetchResults(s.id);\n        if (res.length > 0) {\n          setResults(prev => ({\n            ...prev,\n            [s.id]: res[0]\n          }));\n\n          // Add to realtime logs\n          setLogs(prev => [`[${new Date().toLocaleTimeString()}] Stream ${s.name}: ${JSON.stringify(res[0].result_json)}`, ...prev.slice(0, 30)]);\n        }\n      }\n    }, 1500);\n    return () => clearInterval(interval);\n  }, [streams]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"monitor-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"monitor-title\",\n      children: \"AI Monitoring Center\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"monitor-grid\",\n      children: streams.map(s => {\n        var _results$s$id;\n        const r = ((_results$s$id = results[s.id]) === null || _results$s$id === void 0 ? void 0 : _results$s$id.result_json) || {};\n        const alert = r.alert === true;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `monitor-card ${alert ? \"alert\" : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"monitor-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stream-name\",\n              children: s.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `status-dot ${alert ? \"blink-red\" : \"green\"}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"monitor-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"det-title\",\n              children: \"Latest Detection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n              className: \"det-json\",\n              children: JSON.stringify(r.detections || [], null, 2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this), alert && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert-banner\",\n            children: \"\\u26A0 ALERT DETECTED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)]\n        }, s.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"log-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Realtime Logs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"log-body\",\n        children: logs.map((l, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"log-line\",\n          children: l\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(MonitoringCenter, \"TisPM56QdMRFpKp7IWpVPCnQ+Ms=\");\n_c = MonitoringCenter;\nvar _c;\n$RefreshReg$(_c, \"MonitoringCenter\");","map":{"version":3,"names":["React","useState","useEffect","fetchStreams","fetchResults","jsxDEV","_jsxDEV","MonitoringCenter","_s","streams","setStreams","results","setResults","logs","setLogs","loadStreams","i","setInterval","clearInterval","data","interval","s","res","id","length","prev","Date","toLocaleTimeString","name","JSON","stringify","result_json","slice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","_results$s$id","r","alert","detections","l","_c","$RefreshReg$"],"sources":["C:/Users/shaky/OneDrive/Documents/roadvision/frontend/src/pages/MonitoringCenter.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { fetchStreams, fetchResults } from \"../api/api\";\r\nimport \"./monitoring.css\";\r\n\r\nexport default function MonitoringCenter() {\r\n  const [streams, setStreams] = useState([]);\r\n  const [results, setResults] = useState({});\r\n  const [logs, setLogs] = useState([]);\r\n\r\n  // Load active streams\r\n  useEffect(() => {\r\n    loadStreams();\r\n    const i = setInterval(loadStreams, 4000);\r\n    return () => clearInterval(i);\r\n  }, []);\r\n\r\n  const loadStreams = async () => {\r\n    const data = await fetchStreams();\r\n    setStreams(data);\r\n  };\r\n\r\n  // Poll results periodically\r\n  useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      for (const s of streams) {\r\n        const res = await fetchResults(s.id);\r\n        if (res.length > 0) {\r\n          setResults(prev => ({ ...prev, [s.id]: res[0] }));\r\n\r\n          // Add to realtime logs\r\n          setLogs(prev => [\r\n            `[${new Date().toLocaleTimeString()}] Stream ${s.name}: ${JSON.stringify(res[0].result_json)}`,\r\n            ...prev.slice(0, 30)\r\n          ]);\r\n        }\r\n      }\r\n    }, 1500);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [streams]);\r\n\r\n  return (\r\n    <div className=\"monitor-container\">\r\n      <h1 className=\"monitor-title\">AI Monitoring Center</h1>\r\n\r\n      <div className=\"monitor-grid\">\r\n        {streams.map((s) => {\r\n          const r = results[s.id]?.result_json || {};\r\n          const alert = r.alert === true;\r\n\r\n          return (\r\n            <div key={s.id} className={`monitor-card ${alert ? \"alert\" : \"\"}`}>\r\n              <div className=\"monitor-header\">\r\n                <span className=\"stream-name\">{s.name}</span>\r\n                <span className={`status-dot ${alert ? \"blink-red\" : \"green\"}`}></span>\r\n              </div>\r\n\r\n              <div className=\"monitor-body\">\r\n                <p className=\"det-title\">Latest Detection</p>\r\n                <pre className=\"det-json\">\r\n                  {JSON.stringify(r.detections || [], null, 2)}\r\n                </pre>\r\n              </div>\r\n\r\n              {alert && <div className=\"alert-banner\">âš  ALERT DETECTED</div>}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"log-panel\">\r\n        <h3>Realtime Logs</h3>\r\n        <div className=\"log-body\">\r\n          {logs.map((l, i) => (\r\n            <div key={i} className=\"log-line\">{l}</div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}